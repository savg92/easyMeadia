{"ast":null,"code":"var _class;\nimport { EventEmitter, inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/login/login.service\";\nimport * as i2 from \"@angular/forms\";\nexport class SignInFormComponent {\n  constructor(loginService) {\n    this.loginService = loginService;\n    // router\n    this.router = inject(Router);\n    // show/hide password\n    this.showPassword = false;\n    this.input = 'password';\n    // form validation\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$')]),\n      password: new FormControl('', Validators.required)\n    });\n    // send data to parent component?\n    this.emailSubmitted = new EventEmitter();\n    this.passwordSubmitted = new EventEmitter();\n    this.errorEmail = '';\n    this.errorEmailOrPassword = '';\n  }\n  toggleShow() {\n    this.showPassword = !this.showPassword;\n    this.input = this.showPassword ? 'text' : 'password';\n  }\n  onSubmit(event) {\n    event.preventDefault();\n    if (this.loginForm.valid) {\n      const email = this.loginForm.value.email;\n      this.emailSubmitted.emit(email);\n      const password = this.loginForm.value.password;\n      this.passwordSubmitted.emit(password);\n      // console.log(this.loginForm.value);\n      try {\n        this.loginService.login(this.loginForm.value).subscribe(res => {\n          if (!res.error) {\n            document.cookie = `token=${res.token}; path=/; SameSite=Strict; Secure; HttpOnly; max-age=1800`;\n            localStorage.setItem('token', res.token);\n            console.log(res);\n            this.loginForm.reset();\n            this.errorEmail = '';\n            this.errorEmailOrPassword = '';\n            this.router.navigateByUrl('/add-note');\n          }\n        }, error => {\n          // console.log(error);\n          // ? fix prevent default\n          this.errorEmailOrPassword = 'Invalid email or password';\n          alert(this.errorEmailOrPassword);\n        });\n      } catch (error) {\n        console.log(error);\n        // this.errorEmailOrPassword = 'Invalid email or password';\n        this.errorEmailOrPassword = 'An error occured, please try again later';\n      }\n    } else {\n      const emailControl = this.loginForm.get('email');\n      if (emailControl && !emailControl.valid) {\n        this.errorEmail = 'Please provide a valid email';\n      }\n    }\n  }\n}\n_class = SignInFormComponent;\n_class.ɵfac = function SignInFormComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.LoginService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-sign-in-form\"]],\n  outputs: {\n    emailSubmitted: \"emailSubmitted\",\n    passwordSubmitted: \"passwordSubmitted\"\n  },\n  decls: 18,\n  vars: 4,\n  consts: [[1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"gap-6\", 3, \"formGroup\", \"ngSubmit\"], [1, \"flex\", \"flex-col\"], [\"for\", \"email\", 1, \"label-form\"], [\"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"example@email.com\", \"required\", \"\", 1, \"input-group\"], [1, \"error-text\"], [\"for\", \"password\", 1, \"label-form\"], [1, \"input-group\", \"w-full\"], [\"formControlName\", \"password\", \"placeholder\", \"\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\\u00B7\", \"id\", \"password\", \"required\", \"\", 1, \"w-4/5\", 2, \"font-size\", \"large\", 3, \"type\"], [\"type\", \"button\", 1, \"btn-show\", \"ml-6\", 3, \"click\"], [\"src\", \"../../../assets/eye.svg\", \"alt\", \"eye\", 1, \"eye\", \"w-5\", \"h-5\"], [1, \"flex\", \"flex-col\", \"gap-1\", \"justify-center\", \"items-center\"], [\"type\", \"submit\", \"value\", \"SIGN IN\", 1, \"submit-login\", \"hover:cursor-pointer\"]],\n  template: function SignInFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function SignInFormComponent_Template_form_ngSubmit_0_listener($event) {\n        return ctx.onSubmit($event);\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 3);\n      i0.ɵɵelementStart(5, \"p\", 4);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 1)(8, \"label\", 5);\n      i0.ɵɵtext(9, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 6);\n      i0.ɵɵelement(11, \"input\", 7);\n      i0.ɵɵelementStart(12, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function SignInFormComponent_Template_button_click_12_listener() {\n        return ctx.toggleShow();\n      });\n      i0.ɵɵelement(13, \"img\", 9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"div\", 10);\n      i0.ɵɵelement(15, \"input\", 11);\n      i0.ɵɵelementStart(16, \"p\", 4);\n      i0.ɵɵtext(17);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.errorEmail);\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"type\", ctx.input);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", ctx.errorEmailOrPassword, \" \");\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\"form[_ngcontent-%COMP%] {\\n  margin: 1rem 0rem;\\n}\\n\\n.label-form[_ngcontent-%COMP%] {\\n  color: #0E2248;\\n  font-size: 15px;\\n  font-style: normal;\\n  font-weight: 700;\\n  line-height: normal;\\n}\\n\\n.input-group[_ngcontent-%COMP%] {\\n  width: 235px;\\n  height: 32px;\\n  border-bottom: 1px solid #EAEAEA;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  color: #FFF;\\n  font-family: sans-serif, Arial, Helvetica;\\n  font-size: 15px;\\n  font-style: normal;\\n  font-weight: 500;\\n  line-height: normal;\\n}\\n\\n.error-text[_ngcontent-%COMP%] {\\n  color: #FE4B4B;\\n  font-size: 10px;\\n  font-style: normal;\\n  font-weight: 500;\\n  line-height: normal;\\n}\\n\\n.submit-login[_ngcontent-%COMP%] {\\n  width: 235px;\\n  height: 32px;\\n  flex-shrink: 0;\\n  border-radius: 20px;\\n  background: linear-gradient(270deg, #C645A9 17.66%, #58BBDB 89.57%);\\n  color: #FFF;\\n  font-family: Lato;\\n  font-size: 20px;\\n  font-style: normal;\\n  font-weight: 600;\\n  line-height: normal;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ24taW4tZm9ybS5jb21wb25lbnQuc2NzcyIsIi4uLy4uLy4uLy4uLy4uLy4uL0Vhc3klMjBNZWRpYS9mcm9udGVuZC9zcmMvYXBwL2NvbXBvbmVudHMvc2lnbi1pbi1mb3JtL3NpZ24taW4tZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0FDQ0o7O0FERUE7RUFDSSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7RUFDQSxnQ0FBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7RUFDQSxZQUFBO0VBRUEsV0FBQTtFQUNBLHlDQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0FKOztBREdBO0VBQ0ksY0FBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUNBSjs7QURHQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLG1CQUFBO0VBQ0EsbUVBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FDQUoiLCJmaWxlIjoic2lnbi1pbi1mb3JtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZm9ybXtcbiAgICBtYXJnaW46IDFyZW0gMHJlbTtcbn1cblxuLmxhYmVsLWZvcm0ge1xuICAgIGNvbG9yOiAjMEUyMjQ4O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uaW5wdXQtZ3JvdXAge1xuICAgIHdpZHRoOiAyMzVweDtcbiAgICBoZWlnaHQ6IDMycHg7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQUVBRUE7XG59XG5cbmlucHV0IHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcblxuICAgIGNvbG9yOiAjRkZGO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBBcmlhbCwgSGVsdmV0aWNhO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uZXJyb3ItdGV4dCB7XG4gICAgY29sb3I6ICNGRTRCNEI7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5zdWJtaXQtbG9naW4ge1xuICAgIHdpZHRoOiAyMzVweDtcbiAgICBoZWlnaHQ6IDMycHg7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjQzY0NUE5IDE3LjY2JSwgIzU4QkJEQiA4OS41NyUpO1xuICAgIGNvbG9yOiAjRkZGO1xuICAgIGZvbnQtZmFtaWx5OiBMYXRvO1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufSIsImZvcm0ge1xuICBtYXJnaW46IDFyZW0gMHJlbTtcbn1cblxuLmxhYmVsLWZvcm0ge1xuICBjb2xvcjogIzBFMjI0ODtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5pbnB1dC1ncm91cCB7XG4gIHdpZHRoOiAyMzVweDtcbiAgaGVpZ2h0OiAzMnB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VBRUFFQTtcbn1cblxuaW5wdXQge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGNvbG9yOiAjRkZGO1xuICBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgQXJpYWwsIEhlbHZldGljYTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5lcnJvci10ZXh0IHtcbiAgY29sb3I6ICNGRTRCNEI7XG4gIGZvbnQtc2l6ZTogMTBweDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNTAwO1xuICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uc3VibWl0LWxvZ2luIHtcbiAgd2lkdGg6IDIzNXB4O1xuICBoZWlnaHQ6IDMycHg7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjQzY0NUE5IDE3LjY2JSwgIzU4QkJEQiA4OS41NyUpO1xuICBjb2xvcjogI0ZGRjtcbiAgZm9udC1mYW1pbHk6IExhdG87XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNjAwO1xuICBsaW5lLWhlaWdodDogbm9ybWFsO1xufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zaWduLWluLWZvcm0vc2lnbi1pbi1mb3JtLmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vRWFzeSUyME1lZGlhL2Zyb250ZW5kL3NyYy9hcHAvY29tcG9uZW50cy9zaWduLWluLWZvcm0vc2lnbi1pbi1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQUE7QUNDSjs7QURFQTtFQUNJLGNBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGdDQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLFlBQUE7RUFFQSxXQUFBO0VBQ0EseUNBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FDQUo7O0FER0E7RUFDSSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0FKOztBREdBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0VBQ0EsbUJBQUE7RUFDQSxtRUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUNBSjtBRENBLDR4R0FBNHhHIiwic291cmNlc0NvbnRlbnQiOlsiZm9ybXtcbiAgICBtYXJnaW46IDFyZW0gMHJlbTtcbn1cblxuLmxhYmVsLWZvcm0ge1xuICAgIGNvbG9yOiAjMEUyMjQ4O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uaW5wdXQtZ3JvdXAge1xuICAgIHdpZHRoOiAyMzVweDtcbiAgICBoZWlnaHQ6IDMycHg7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQUVBRUE7XG59XG5cbmlucHV0IHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcblxuICAgIGNvbG9yOiAjRkZGO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmLCBBcmlhbCwgSGVsdmV0aWNhO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uZXJyb3ItdGV4dCB7XG4gICAgY29sb3I6ICNGRTRCNEI7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5zdWJtaXQtbG9naW4ge1xuICAgIHdpZHRoOiAyMzVweDtcbiAgICBoZWlnaHQ6IDMycHg7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjQzY0NUE5IDE3LjY2JSwgIzU4QkJEQiA4OS41NyUpO1xuICAgIGNvbG9yOiAjRkZGO1xuICAgIGZvbnQtZmFtaWx5OiBMYXRvO1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xufSIsImZvcm0ge1xuICBtYXJnaW46IDFyZW0gMHJlbTtcbn1cblxuLmxhYmVsLWZvcm0ge1xuICBjb2xvcjogIzBFMjI0ODtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5pbnB1dC1ncm91cCB7XG4gIHdpZHRoOiAyMzVweDtcbiAgaGVpZ2h0OiAzMnB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VBRUFFQTtcbn1cblxuaW5wdXQge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGNvbG9yOiAjRkZGO1xuICBmb250LWZhbWlseTogc2Fucy1zZXJpZiwgQXJpYWwsIEhlbHZldGljYTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi5lcnJvci10ZXh0IHtcbiAgY29sb3I6ICNGRTRCNEI7XG4gIGZvbnQtc2l6ZTogMTBweDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNTAwO1xuICBsaW5lLWhlaWdodDogbm9ybWFsO1xufVxuXG4uc3VibWl0LWxvZ2luIHtcbiAgd2lkdGg6IDIzNXB4O1xuICBoZWlnaHQ6IDMycHg7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjQzY0NUE5IDE3LjY2JSwgIzU4QkJEQiA4OS41NyUpO1xuICBjb2xvcjogI0ZGRjtcbiAgZm9udC1mYW1pbHk6IExhdG87XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNjAwO1xuICBsaW5lLWhlaWdodDogbm9ybWFsO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["EventEmitter","inject","FormControl","FormGroup","Validators","Router","SignInFormComponent","constructor","loginService","router","showPassword","input","loginForm","email","required","pattern","password","emailSubmitted","passwordSubmitted","errorEmail","errorEmailOrPassword","toggleShow","onSubmit","event","preventDefault","valid","value","emit","login","subscribe","res","error","document","cookie","token","localStorage","setItem","console","log","reset","navigateByUrl","alert","emailControl","get","i0","ɵɵdirectiveInject","i1","LoginService","selectors","outputs","decls","vars","consts","template","SignInFormComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","SignInFormComponent_Template_form_ngSubmit_0_listener","$event","ɵɵtext","ɵɵelementEnd","ɵɵelement","SignInFormComponent_Template_button_click_12_listener","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate","ɵɵpropertyInterpolate","ɵɵtextInterpolate1"],"sources":["/Users/santiago.valenzuela/Desktop/Easy Media/frontend/src/app/components/sign-in-form/sign-in-form.component.ts","/Users/santiago.valenzuela/Desktop/Easy Media/frontend/src/app/components/sign-in-form/sign-in-form.component.html"],"sourcesContent":["import { Component, EventEmitter, Output, inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LoginService } from 'src/app/services/login/login.service';\n\n@Component({\n\tselector: 'app-sign-in-form',\n\ttemplateUrl: './sign-in-form.component.html',\n\tstyleUrls: ['./sign-in-form.component.scss'],\n})\nexport class SignInFormComponent {\n\tconstructor(private loginService: LoginService) {}\n\n\t// router\n\trouter = inject(Router);\n\n\t// show/hide password\n\tshowPassword = false;\n\tinput = 'password';\n\ttoggleShow() {\n\t\tthis.showPassword = !this.showPassword;\n\t\tthis.input = this.showPassword ? 'text' : 'password';\n\t}\n\n\t// form validation\n\tloginForm = new FormGroup({\n\t\temail: new FormControl('', [\n\t\t\tValidators.required,\n\t\t\tValidators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$'),\n\t\t]),\n\t\tpassword: new FormControl('', Validators.required),\n\t});\n\n\t// send data to parent component?\n\t@Output() emailSubmitted = new EventEmitter();\n\t@Output() passwordSubmitted = new EventEmitter();\n\n\terrorEmail = '';\n\terrorEmailOrPassword = '';\n\n\tonSubmit(event: Event) {\n\t\tevent.preventDefault();\n\n\t\tif (this.loginForm.valid) {\n\t\t\tconst email = this.loginForm.value.email;\n\t\t\tthis.emailSubmitted.emit(email);\n\n\t\t\tconst password = this.loginForm.value.password;\n\t\t\tthis.passwordSubmitted.emit(password);\n\n\t\t\t// console.log(this.loginForm.value);\n\n\t\t\ttry {\n\t\t\t\tthis.loginService.login(this.loginForm.value).subscribe(\n\t\t\t\t\t(res: any) => {\n\t\t\t\t\t\tif (!res.error) {\n\t\t\t\t\t\t\tdocument.cookie = `token=${res.token}; path=/; SameSite=Strict; Secure; HttpOnly; max-age=1800`;\n\t\t\t\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\t\t\t\tconsole.log(res);\n\n\t\t\t\t\t\t\tthis.loginForm.reset();\n\t\t\t\t\t\t\tthis.errorEmail = '';\n\t\t\t\t\t\t\tthis.errorEmailOrPassword = '';\n\t\t\t\t\t\t\tthis.router.navigateByUrl('/add-note');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t(error: any) => {\n\t\t\t\t\t\t// console.log(error);\n\n\t\t\t\t\t\t// ? fix prevent default\n\t\t\t\t\t\tthis.errorEmailOrPassword = 'Invalid email or password';\n\n\t\t\t\t\t\talert(this.errorEmailOrPassword);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch (error: any) {\n\t\t\t\tconsole.log(error);\n\t\t\t\t// this.errorEmailOrPassword = 'Invalid email or password';\n\t\t\t\tthis.errorEmailOrPassword = 'An error occured, please try again later';\n\t\t\t}\n\t\t} else {\n\t\t\tconst emailControl = this.loginForm.get('email');\n\t\t\tif (emailControl && !emailControl.valid) {\n\t\t\t\tthis.errorEmail = 'Please provide a valid email';\n\t\t\t}\n\t\t}\n\t}\n}\n","<form\n\t[formGroup]=\"loginForm\"\n\t(ngSubmit)=\"onSubmit($event)\"\n\tclass=\"flex flex-col items-center justify-center gap-6\"\n>\n\t<div class=\"flex flex-col\">\n\t\t<label\n\t\t\tfor=\"email\"\n\t\t\tclass=\"label-form\"\n\t\t\t>Email</label\n\t\t>\n\t\t<input\n\t\t\ttype=\"email\"\n\t\t\tformControlName=\"email\"\n\t\t\tplaceholder=\"example@email.com\"\n\t\t\tclass=\"input-group\"\n\t\t\trequired\n\n\t\t/>\n\t\t<p class=\"error-text\">{{errorEmail}}</p>\n\t</div>\n\t<div class=\"flex flex-col\">\n\t\t<label\n\t\t\tfor=\"password\"\n\t\t\tclass=\"label-form\"\n\t\t\t>Password</label\n\t\t>\n\t\t<div class=\"input-group w-full\">\n\t\t\t<input\n\t\t\t\ttype=\"{{ input }}\"\n\t\t\t\tformControlName=\"password\"\n\t\t\t\tplaceholder=\"······\"\n\t\t\t\tstyle=\"font-size: large\"\n\t\t\t\tid=\"password\"\n\t\t\t\trequired\n\t\t\t\tclass=\"w-4/5\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn btn-outline-secondary\"\n\t\t\t\t(click)=\"toggleShow()\"\n\t\t\t\tclass=\"btn-show ml-6\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"../../../assets/eye.svg\"\n\t\t\t\t\talt=\"eye\"\n\t\t\t\t\tclass=\"eye w-5 h-5\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div class=\"flex flex-col gap-1 justify-center items-center\">\n\t\t<input\n\t\t\ttype=\"submit\"\n\t\t\tvalue=\"SIGN IN\"\n\t\t\tclass=\"submit-login hover:cursor-pointer\"\n\t\t/>\n\t\t<p class=\"error-text\">\n\t\t\t{{errorEmailOrPassword}}\n\t\t</p>\n\t</div>\n</form>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}